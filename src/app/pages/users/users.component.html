<div class="w-full app-margin px-4">
  <div class="flex flex-col md:flex-row lg:flex-row xl:flex-row">
    <h1 class="text-slate-800 dark:text-slate-100 font-bold page-title">
      Users
    </h1>
    <div class="ml-auto flex flex-row items-center gap-5">
      <form class="flex flex-row gap-2 items-center">
        <input
          type="search"
          id="default-search"
          [(ngModel)]="searchTerm"
          name="searchTerm"
          placeholder="Search Name"
          class="btn bg-white text-left dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"
        />
        <button (click)="updateSearchQuery()" class="btn-primary">
          Search
        </button>
      </form>
      <div class="relative inline-block text-left">
        <div>
          <button
            type="button"
            class="inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"
            id="menu-button"
            aria-expanded="true"
            aria-haspopup="true"
            (click)="toggleDropdown()"
          >
            <span class="material-symbols-outlined filter-color">
              filter_list
            </span>
          </button>
        </div>

        <div
          *ngIf="showDropdown"
          class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="menu-button"
          tabindex="-1"
        >
          <div
            class="flex flex-col gap-1 text-left py-1 filter-dropdown"
            role="none"
          >
            <button
              class="text-left px-2"
              (click)="sortData('name-asc', 'name')"
            >
              Ascending
            </button>
            <button
              class="text-left px-2"
              (click)="sortData('name-desc', 'name')"
            >
              Descending
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="bg-white dark:bg-slate-800 rounded-sm border border-slate-200 dark:border-slate-700 box-table"
  >
    <div class="px-2 py-1 border-0">
      <div class="flex flex-wrap items-center">
        <div class="relative w-full max-w-full flex-grow flex-1">
          <h2 class="text-slate-800 mt-2 dark:text-slate-100">All Users</h2>
        </div>
      </div>
    </div>
    <div class="block w-full overflow-x-auto">
      <div class="custom-light-theme">
        <div class="custom-light-theme">
          <table mat-table [dataSource]="dataSource" class="mat-table">
            <!-- ID Column -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>ID</th>
              <td mat-cell *matCellDef="let post">{{ post.id }}</td>
            </ng-container>

            <!-- User Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let post">
                <span class="font-medium">{{ post.name }}</span>
              </td>
            </ng-container>

            <!-- Username -->
            <ng-container matColumnDef="username">
              <th mat-header-cell *matHeaderCellDef>Username</th>
              <td mat-cell *matCellDef="let post">{{ post.username }}</td>
            </ng-container>

            <!--Email -->
            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let post">
                <span class="text-blue-500">{{ post.email }}</span>
              </td>
            </ng-container>

            <!--Address -->
            <ng-container matColumnDef="city">
              <th mat-header-cell *matHeaderCellDef>City</th>
              <td mat-cell *matCellDef="let post">{{ post.address.city }}</td>
            </ng-container>

            <!--Phone -->
            <ng-container matColumnDef="phone">
              <th mat-header-cell *matHeaderCellDef>Phone</th>
              <td mat-cell *matCellDef="let post">
                <span class="phone-text">{{ post.phone }}</span>
              </td>
            </ng-container>

            <!--Website -->
            <ng-container matColumnDef="website">
              <th mat-header-cell *matHeaderCellDef>Website</th>
              <td mat-cell *matCellDef="let post">{{ post.website }}</td>
            </ng-container>

            <!--Company -->
            <ng-container matColumnDef="companyName">
              <th mat-header-cell *matHeaderCellDef>Company</th>
              <td mat-cell *matCellDef="let post">{{ post.company.name }}</td>
            </ng-container>

            <!-- Action Column -->
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let post">
                <!-- Example Action Button -->
                <button
                  class="text-icon-500"
                  (click)="viewPost(post.id)"
                  mat-button
                >
                  <span class="material-symbols-outlined text-icon-500">
                    visibility
                  </span>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <mat-paginator
            [pageSizeOptions]="[5, 10, 20]"
            showFirstLastButtons
          ></mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
